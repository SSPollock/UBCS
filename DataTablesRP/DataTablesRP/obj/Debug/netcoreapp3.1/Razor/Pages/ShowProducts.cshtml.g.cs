#pragma checksum "C:\UBCS\DataTablesRP\DataTablesRP\Pages\ShowProducts.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "627bda2bba4d35def619f0f07cfc6cc28a4b1cff"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(DataTablesRP.Pages.Pages_ShowProducts), @"mvc.1.0.razor-page", @"/Pages/ShowProducts.cshtml")]
namespace DataTablesRP.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\UBCS\DataTablesRP\DataTablesRP\Pages\_ViewImports.cshtml"
using DataTablesRP;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"627bda2bba4d35def619f0f07cfc6cc28a4b1cff", @"/Pages/ShowProducts.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"03c2002b840263bda931c8d654b56cfdbb89ea1e", @"/Pages/_ViewImports.cshtml")]
    public class Pages_ShowProducts : global::Microsoft.AspNetCore.Mvc.RazorPages.Page
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 3 "C:\UBCS\DataTablesRP\DataTablesRP\Pages\ShowProducts.cshtml"
   
    ViewData["Title"] = "ShowProducts"; 

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\UBCS\DataTablesRP\DataTablesRP\Pages\ShowProducts.cshtml"
Write(Html.AntiForgeryToken());

#line default
#line hidden
#nullable disable
            WriteLiteral(@" 
<h2>Northwind Products</h2> 
<div class=""container"">
    <br />     
    <div style=""width:90%; margin:0 auto;"">
        <table id=""nwprod"" class=""table mytable table-sm table-striped table-bordered dt-responsive nowrap"" width=""100%"" cellspacing=""0"">
            <thead>
                <tr>                     
                    <th>ProductId</th>                     
                    <th>ProductName</th>                     
                    <th>Price</th>                     
                    <th>Stock Level</th>                     
                    <th>Edit</th>                     
                    <th>Delete</th>                 
                </tr>
            </thead>
        </table>
    </div>
</div> 

<!--------------modal delete confirm--------> 
<div class=""modal fade"" id=""myModal"" tabindex=""-1"" role=""dialog"">     
    <div class=""modal-dialog"">         
        <div class=""modal-content"">             
            <div class=""modal-header"">            ");
            WriteLiteral(@"     
                <h5 class=""modal-title text-danger"" id=""myModalLabel"">Warning.. </h5>                 
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-hidden=""true"">&times;</button>             
            </div>             
            <div class=""modal-body"">                 
                <h5> DELETE Product?</h5>             
            </div>             
            <div class=""modal-footer"">                 
                <button type=""button"" class=""btn btn-danger"" onclick=""DeleteProduct()"" id=""btnDeleteYes"" href=""#"">Yes</button>                 
                <button type=""button"" class=""btn btn-outline-success"" data-dismiss=""modal"">No</button>             
            </div>         
        </div>     
    </div> 
</div> 
<!-----------------------------------> 

<div id=""editmodal-placeholder""></div> 
");
            DefineSection("Scripts", async() => {
                WriteLiteral(@"
    <script>
        $(function () {
            $(""#nwprod"").DataTable({
                ""processing"": true, // to show progress bar                 
                ""serverSide"": true, //                 
                ""filter"": true, // to do search                 
                ""orderMulti"": false, // to disable multiple column
                ""ajax"": {
                    ""url"": ""/ShowProducts?handler=LoadData"", ""type"": ""POST"", ""datatype"": ""json"", ""cache"": false,
                    // AntiforgeryToken is required by RazorPages                     
                    ""headers"": {
                        RequestVerificationToken: $('input:hidden[name=""__RequestVerificationToken""]').val()
                    }
                },
                ""columnDefs"": [{
                    ""targets"": [0],  // make ProductId invisible                         
                    ""visible"": false, ""searchable"": true
                }],
                ""columns"": [
                    { ""dat");
                WriteLiteral(@"a"": ""productId"", ""name"": ""ProductId"", ""autoWidth"": true },
                    { ""data"": ""productName"", ""name"": ""ProductName"", ""autoWidth"": true },
                    { ""data"": ""unitPrice"", ""name"": ""UnitPrice"", ""autoWidth"": true },
                    { ""data"": ""unitsInStock"", ""name"": ""UnitsInStock"", ""autoWidth"": true },
                    {
                        ""render"": function (data, type, full, meta) {
                            return '<a class=""btn-sm btn-primary"" href=""/ShowProducts?handler=Edit&id=' + full.productId + '"" onclick=""return EditData(' + full.productId + ')"";>Edit</a>';
                        }
                    },
                    {
                        data: null, render: function (data, type, row) {
                            return ""<a href='#' class='btn-sm btn-danger' onclick=DeleteData('"" + row.productId + ""'); >Delete</a>"";
                        }
                },],
            });
        });

        function EditData(productId) {
          ");
                WriteLiteral(@"  var url = '/ShowProducts?handler=ProductsModalPartial&prodid=' + productId; var placeholderElement = $('#editmodal-placeholder'); $.get(url).done(function (data) {
                placeholderElement.html(data); placeholderElement.find('.modal').modal({
                    backdrop: 'static',  // to prevent closing modal when clicked outside                     
                    keyboard: true,  // e.g., prevent escape on keyboard closing modal                     
                    show: true,
                    //id: productId                 
                });
            });
            $(""#btnSaveYes"").attr('data-prodid', productId);
            return false;
        }

        var placeholderElement = $('#editmodal-placeholder');
        placeholderElement.on('click', '[data-save=""modal""]', function (event) {
            event.preventDefault();
            var form = $(this).parents('.modal').find('form');
            var actionUrl = form.attr('action');
            var dataToS");
                WriteLiteral(@"end = form.serialize();
            var isValid = form.find('[name=""IsValid""]').val() == 'True';
            $.post(actionUrl, dataToSend).done(function (data) {
                // data is the rendered _ProductEditPartial                 
                var newBody = $('.modal-body', data);
                // replace modal contents with new form                 
                placeholderElement.find('.modal-body').replaceWith(newBody);
                oTable = $('#nwprod').DataTable();
                oTable.draw('page');
            });
        });

        function DeleteData(productId) {
            // modal confirm for delete             
            // set the data-prodid attribute in modal to productId             
            // so that when this button is clicked, we can retrieve             
            // the attribute and find the productId to delete             
            $(""#btnDeleteYes"").attr('data-prodid', productId); $('#myModal').modal({
                backdrop: 'stat");
                WriteLiteral(@"ic',  // to prevent closing modal when clicked outside                 
                keyboard: true,  // e.g., prevent escape on keyboard closing modal                 
                show: true,
                // id: productId             
            });
        }

        function DeleteProduct() {
            var productId = $(""#btnDeleteYes"").attr('data-prodid')
            var urldel = ""/ShowProducts?handler=Delete"";
            $.ajax({ url: urldel, type: ""POST"", datatype: ""json"", data: { prodId: productId },
                // AntiforgeryToken is required by RazorPages                 
                headers: {
                    RequestVerificationToken: $('input:hidden[name=""__RequestVerificationToken""]').val()
                },
                success: function (result) {
                    if (result) {
                        oTable = $('#nwprod').DataTable();
                        oTable.draw('page');
                    }
                    else {
              ");
                WriteLiteral("          alert(\"Something Went Wrong!\");\r\n                    }\r\n                }\r\n            });\r\n            $(\"#myModal .close\").click();  // close modal         \r\n        }     \r\n    </script> \r\n");
            }
            );
            WriteLiteral(" ");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<DataTablesRP.Pages.ShowProductsModel> Html { get; private set; }
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<DataTablesRP.Pages.ShowProductsModel> ViewData => (global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<DataTablesRP.Pages.ShowProductsModel>)PageContext?.ViewData;
        public DataTablesRP.Pages.ShowProductsModel Model => ViewData.Model;
    }
}
#pragma warning restore 1591
